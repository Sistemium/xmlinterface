<?xml version="1.0" ?>
<domain version="1.0"
    xmlns:xi="http://unact.net/xml/xi"
    xmlns="http://unact.net/xml/xi"
>

    <concept name="fotonova">
        <select owner="sys" sql-name="dummy"/>
        <property name="sync" type="string" sql-compute="case fnova.DataExchange() when 0 then 'Отработало удачно' when 1 then 'Произошла ошибка' end" label="Импорт данных"/>
    </concept>

 
    <concept name="expreturn-position">
        <select type="procedure"/>
        <role name="expeditor" actor="agent"/>
        <role name="sale_order" actor="sale_order"/>
        <role name="partner" actor="partner"/>
        <role composite="true" name="goodspackage" actor="goodspackage"/>
        <property name="id" key="true"/>
    </concept>

    <concept name="storage-place">
        <select owner="dbo"/>
        <property name="id" key="true"/>
        <property name="name" type="string"/>
    </concept>

    <concept name="income-place">
        <select owner="dbo" sql-name="storage-place"/>
        <property name="id" key="true"/>
        <property name="name" type="string"/>
    </concept>


    <concept name="supply" label="Поставка">
        <select owner="dbo"/>
        <property name="id" key="true"/>
        <property name="name" type="string" sql-compute="string(ndoc,' от ',date(ddate))"/>
        <property name="date" type="date" sql-name="ddate"/>
        <property name="ndoc" type="string"/>
        <property name="status1" type="int" sql-name="status"/>
    </concept>
    <concept name="supgoods" label="Позиция поставки">
        <select owner="dbo"/>
        <property name="id" key="true"/>
        <property name="vol" type="int"/>
        <role name="supply" actor="supply" sql-name="id"/>
        <role name="goods" actor="goods"/>
    </concept>

    <concept name="palette-placement">
        <select owner="dbo"/>
        <save owner="dbo"/>
        <role name="income-position" actor="income-position"/>
        <role name="storage-place" actor="storage-place"/>
        <property name="xid"/>
    </concept>

    <concept name="income-position">
        <select owner="dbo"/>
        <save owner="dbo"/>
        <property name="id" key="true"/>
        <property name="xid"/>
        <role name="supply" actor="supply"/>
        <role name="income-place" actor="income-place"/>
        <role composite="true" name="goodspackage" actor="goodspackage"/>
        <property name="volume" type="int"/>
        <property name="production-date" type="date"/>
        <property name="palette" type="string"/>
    </concept>

    <concept name="goodspackage" type="association">
        <select type="procedure">
            <parameter name="barcode" sql-name="@searcher"/>
        </select>
        <role name="goods" actor="goods" key="true"/>
        <role name="package" actor="package" key="true"/>
    </concept>


    

</domain>
