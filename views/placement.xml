<?xml version="1.0"?>
<view-definition xmlns="http://unact.net/xml/xi" name="placement" label="Размещение">
    <view-schema>
        <form name="palette-placement" label="Размещение палет">
            <field name="xid" type="string"/>
            <form name="income-position" label="Палета">
            	<parameter name="palette" type="string" label="Код палеты" editable="true"/>
            	<field name="id" type="int"/>
            </form>
            <form name="storage-place" label="Место хранения">
            	<parameter name="name" type="string" label="Адрес" editable="true"/>
            	<field name="id" type="int"/>
            	<field name="name" type="string"/>
            </form>
        </form> 
    </view-schema>
    
    <workflow>
        <step label="Идентификация палеты">
            <display>
                <input field="palette"/>
            </display>
            <validate>
                <nonempty form="income-position"/>
            </validate>
        </step>
        <step label="Определение места">
            <display>
                <print field="palette"/>
                <input form="storage-place" field="name"/>                
            </display>
            <validate>
                <nonempty form="storage-place"/>                
            </validate>
        </step>
        <step label="Сохранение результатов">
            <display>
                <print field="palette"/>
                <print field="name" form="storage-place"/>
            </display>
            <choise>
                <option label="Сохранить и закрыть">
                    <command name="save"/>
                    <command name="close"/>
                </option>
                <option label="Сохранить и продолжить">
                    <command name="save"/>
                    <command name="refresh"/>
                </option>
            </choise>
        </step>
    </workflow>
</view-definition>